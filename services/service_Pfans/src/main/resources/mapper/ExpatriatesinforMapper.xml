<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nt.service_pfans.PFANS6000.mapper.ExpatriatesinforMapper">

    <select id="getSearch" parameterType="com.nt.dao_Pfans.PFANS6000.Expatriatesinfor"
            resultType="com.nt.dao_Pfans.PFANS6000.Expatriatesinfor">
        SELECT
        *
        FROM
        expatriatesinfor
        where status != '1'
        <if test="suppliername != null and suppliername != ''">
            and suppliername like CONCAT('%',#{suppliername},'%')
        </if>
        <if test="expname != null and expname != ''">
            and from_base64(expname) like CONCAT('%',#{expname},'%')
        </if>
        <if test="group_id != null and group_id != ''">
            and group_id = #{group_id}
        </if>
        <if test="operationform != null and operationform != ''">
            and operationform = #{operationform}
        </if>
        <if test="number != null and number != ''">
            and number like CONCAT('%',#{number},'%')
        </if>
        <if test="admissiontime != null">
            and admissiontime like  CONCAT( '%', ( DATE_FORMAT(#{admissiontime},'%Y-%m') ), '%' )
        </if>
        <if test="interviewdep != null and interviewdep != ''">
            and interviewdep = #{interviewdep}
        </if>
        <if test="whetherentry != null and whetherentry != ''">
            and whetherentry = #{whetherentry}
        </if>
        <if test="owners != null and owners.size() > 0 ">
            and
            owner in
            <foreach item="item" index="index" collection="owners"
                     open="(" separator="," close=")">
                #{item}
            </foreach>
        </if>
    </select>

    <select id="getIdByName" parameterType="java.lang.String" resultType="java.lang.String">
        SELECT
               account
        FROM expatriatesinfor
        WHERE EXPNAME LIKE CONCAT('%',#{exname},'%')
        AND STATUS != '1'
    </select>
</mapper>


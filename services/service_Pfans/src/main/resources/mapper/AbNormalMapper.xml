<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nt.service_pfans.PFANS2000.mapper.AbNormalMapper">
    <select id="selectAbNormal" parameterType="java.lang.String" resultType="com.nt.dao_Pfans.PFANS2000.AbNormal">
        select
        ABNORMAL_ID abnormalid,
        CENTER_ID centerid,
        GROUP_ID groupid,
        TEAM_ID  teamid,
        USER_ID  user_id,
        APPLICATION_DATE applicationdate,
        ERROR_TYPE errortype,
        OCCURRENCE_DATE occurrencedate,
        FINISHED_DATE finisheddate,
        PERIOD_START  periodstart,
        PERIOD_END  periodend,
        CAUSE  cause,
        UPLOADFILE uploadfile,
        RECOGNITIONSTATE recognitionstate,
        LENGTHTIME lengthtime,
        HOSPITAL hospital,
        EDATE edate,
        RELATION relation,
        ENCLOSUREEXPLAIN enclosureexplain
        from abnormal
        where abnormal.occurrence_date &lt;= #{now}
        and abnormal.FINISHED_DATE &gt;= #{now}
        or (YEAR(abnormal.occurrence_date) = YEAR(NOW())
        and MONTH(abnormal.occurrence_date) = MONTH(NOW()))
        or (YEAR(abnormal.FINISHED_DATE) = YEAR(NOW())
        and MONTH(abnormal.FINISHED_DATE) = MONTH(NOW()))
    </select>
    <select id="selectAbNormalThisYear" parameterType="com.nt.dao_Pfans.PFANS2000.AbNormal" resultType="com.nt.dao_Pfans.PFANS2000.AbNormal">
        select
        ERROR_TYPE errortype,
        LENGTHTIME lengthtime
        from abnormal
        where abnormal.occurrence_date >= #{occurrencedate}
        and abnormal.occurrence_date &lt; #{finisheddate}
        and abnormal.FINISHED_DATE &gt;= #{occurrencedate}
        and abnormal.FINISHED_DATE &lt; #{finisheddate}
    </select>
    <select id="selectAbNormal1"  resultType="com.nt.dao_Pfans.PFANS2000.AbNormal">
        SELECT
         SUM(lengthtime) AS lengthtime
        FROM abnormal
        WHERE error_type = 'PR013008'
    </select>
</mapper>


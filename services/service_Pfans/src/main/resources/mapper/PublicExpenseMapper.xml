<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nt.service_pfans.PFANS1000.mapper.PublicExpenseMapper">
    <select id="getInvoiceNo" resultType="Integer">
        select count(*) from publicexpense
        where REIMBURSEMENTDATE = #{reimbursementDate}
        group by REIMBURSEMENTDATE
    </select>
<!--    upd-lyt-21/4/6-PSDCD_PFANS_20210318_BUG_035-更改SQL语句，返回当日数最大的精算号并把返回值类型改回去-start-->
    <select id="getAporGlNo" resultType="Integer">
          select MAX(CONVERT (SUBSTRING(INVOICENO,12) , signed))  from publicexpense
        where REIMBURSEMENTDATE = #{reimbursementDate} and INVOICENO like CONCAT('%',#{AporGl},'%')
    </select>
<!--    upd-lyt-21/4/6-PSDCD_PFANS_20210318_BUG_035-更改SQL语句，返回当日数最大的精算号并把返回值类型改回去-end-->
    <select id="getpublicelist"  resultType="com.nt.dao_Pfans.PFANS1000.PublicExpense">
     select * from publicexpense where JUDGEMENT like CONCAT('%',#{code},'%')
    </select>

    <select id="getLoan" resultType="com.nt.dao_Pfans.PFANS1000.PublicExpense">
     select * from publicexpense where LOAN like CONCAT('%',#{loan},'%')
    </select>


</mapper>

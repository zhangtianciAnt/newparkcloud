<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nt.service_AOCHUAN.AOCHUAN5000.mapper.FinReportMapper">

    <select id="getAll" resultType="com.nt.dao_AOCHUAN.AOCHUAN5000.Vo.FinReport">
               select
            t.contractnumber,
            p.CHINANAME,
            c.CUSTOMERNAMECN,
            t.country,
            s2.SUPPLIERNAMECN,
            s.numbers,
            s.currency,
            s.unitprice,
            s.salesamount,
            t.payment,
            t.collectionaccount,
            t.saleresponsibility,
            s.currency1,
            s.unitprice1,
            s.purchaseamount,
            t.hscode,
            t.drawback,
            t.productresponsibility,
            t.appraisalcost,
            t.bill,
            t.billtime,
            t.freight,
            t.premium,
            r.CONTRACTNO,
			fs.EX_RATE,
			fs.AMOUNT,
			fs.INVOICEAMOUNT,
			fs.BILLINGTIME,
			fs.amountreceived,
            fp.INVOICENUMBER,
			fs.arrivaltime,
			fs.COMMISSIONAMOUNTA,
			fp.FKTIME,
			fp.FKMONEY,
            d.VALUE1 as fukuan,
            d2.VALUE1 as caigoubizhong,
            d3.VALUE1
        from saledetails s
        inner join transportgood t
         on s.transportgood_id = t.transportgood_id
        left join products p
         on s.productid = p.PRODUCTS_ID
        left join customerbaseinfor c
         on t.customerid = c.CUSTOMERBASEINFOR_ID
        left join supplierbaseinfor s2
         on s.supplierid = s2.SUPPLIERBASEINFOR_ID
        left join returngoods r
         on t.contractnumber = r.CONTRACTNO
				left join fin_sales fs
         on t.contractnumber = fs.CONTRACTNUMBER
				left join fin_purchase fp
         on fs.TRANSPORTGOOD_ID = fp.TRANSPORTGOOD_ID
        left join dictionary d
        on t.payment = d.CODE
        and d.PCODE = 'PY009'
        left join dictionary d2
        on t.currency = d2.CODE
        and d2.PCODE = 'PY008'
        left join dictionary d3
        on t.currency1 = d3.CODE
        and d3.PCODE = 'PY008'
        where t.STATUS != '1'
        group by s.productid,s.transportgood_id,s.supplierid
    </select>
</mapper>

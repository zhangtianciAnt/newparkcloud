<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nt.service_AOCHUAN.AOCHUAN5000.mapper.FinSalesMapper">

    <!--existCheck-->
    <select id="existCheck" resultType="com.nt.dao_AOCHUAN.AOCHUAN5000.FinSales">
        SELECT * FROM fin_sales WHERE SALES_ID = #{id} AND  STATUS != '1'
    </select>

    <!--uniqueCheck-->
    <select id="uniqueCheck" resultType="com.nt.dao_AOCHUAN.AOCHUAN5000.FinSales">
        SELECT * FROM fin_sales WHERE SALES_ID != #{id} AND CONTRACTNUMBER = #{contractnumber} AND STATUS != '1'
    </select>
    <!--???????????-->
    <select id="getHK" resultType="com.nt.dao_AOCHUAN.AOCHUAN5000.Vo.Totalmoney">
        select
        month(ARRIVALTIME) as months
        ,sum(SALESAMOUNT) as sumSALESAMOUNT
        from `fin_sales`
        where ARRIVALTIME is not null
        group by month (ARRIVALTIME)
        ORDER BY months
    </select>

    <!--updateTransportgood-->
    <update id="updateTransportGood">
    UPDATE transportgood
    SET
    ARRIVALTIME = #{arrivaltime},
    MODIFYBY = #{modifyby},
    MODIFYON = now()
    WHERE
    TRANSPORTGOOD_ID = #{id}
    </update>

    <!--updateTransportgood-->
    <update id="toUpDateReFunded">
		UPDATE fin_sales
		SET
		EX_RATE = #{exratefunded},
		AMOUNTRECEIVED =#{amountreceivedfunded},
		INVOICEAMOUNT =#{invoiceamountfunded},
		BILLINGTIME =#{billingtimefunded},
		COMMISSIONAMOUNTA =#{commissionamountafunded}
		WHERE
		CONTRACTNUMBER = #{id}
    </update>
</mapper>

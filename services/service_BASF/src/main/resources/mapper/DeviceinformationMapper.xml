<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nt.service_BASF.mapper.DeviceinformationMapper" >
  <resultMap id="BaseResultMap" type="com.nt.dao_BASF.Deviceinformation" >
    <!--
      WARNING - @mbg.generated
    -->
    <id column="deviceinformationid" property="deviceinformationid" jdbcType="VARCHAR" />
    <result column="mapid" property="mapid" jdbcType="VARCHAR"/>
    <result column="deviceno" property="deviceno" jdbcType="VARCHAR" />
      <result column="devicetypesmall" property="devicetypesmall" jdbcType="VARCHAR"/>
    <result column="devicetype" property="devicetype" jdbcType="VARCHAR" />
    <result column="devicename" property="devicename" jdbcType="VARCHAR" />
    <result column="personliable" property="personliable" jdbcType="VARCHAR" />
    <result column="region" property="region" jdbcType="VARCHAR" />
    <result column="defencearea" property="defencearea" jdbcType="VARCHAR" />
    <result column="device" property="device" jdbcType="VARCHAR" />
    <result column="floor" property="floor" jdbcType="VARCHAR" />
    <result column="subordinatesystem" property="subordinatesystem" jdbcType="VARCHAR" />
    <result column="detailedlocation" property="detailedlocation" jdbcType="VARCHAR" />
    <result column="GIS" property="gis" jdbcType="VARCHAR" />
    <result column="remark" property="remark" jdbcType="VARCHAR" />
    <result column="STATUS" property="status" jdbcType="VARCHAR" />
    <result column="CREATEON" property="createon" jdbcType="TIMESTAMP" />
    <result column="CREATEBY" property="createby" jdbcType="VARCHAR" />
    <result column="MODIFYON" property="modifyon" jdbcType="TIMESTAMP" />
    <result column="MODIFYBY" property="modifyby" jdbcType="VARCHAR" />
    <result column="Owner" property="owner" jdbcType="VARCHAR" />
    <result column="TENANTID" property="tenantid" jdbcType="VARCHAR" />
  </resultMap>

    <select id="selectDeviceList" resultType="com.nt.dao_BASF.Deviceinformation">
        SELECT
        d.deviceinformationid,
        d.mapid,
        d.deviceno,
        d.devicetypesmall,
        d.devicetype,
        d.devicename,
        d.personliable,
        d.region,
        d.defencearea,
        d.device,
        d.floor,
        d.subordinatesystem,
        d.detailedlocation,
        d.devicestatus,
        d.GIS,
        d.remark,
        d.ip,
        d.factoryname,
        d.line,
        d.`row`
        FROM deviceinformation AS d
        WHERE
        `STATUS`="0"
        AND
        mapid=#{mapid}
        AND
        <if test="devicetype!=null">
            (
            <foreach collection="devicetype" item="item" separator="OR">
                devicetype=#{item}
            </foreach>
            )
        </if>
        <if test="devicetypesmall!=null">
            AND
            (
            <foreach collection="devicetypesmall" item="item" separator="OR">
                devicetypesmall=#{item}
            </foreach>
            )
        </if>
        <if test="devicename!=null">
            AND
            devicename like #{devicename}
        </if>
        ORDER BY
        d.CREATEON DESC
        <if test="pageindex!=null and pagesize!=null">
            LIMIT
            #{pageindex},#{pagesize}
        </if>

    </select>
</mapper>
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.nt.service_BASF.mapper.MapBox_MapLevelMapper">
    <resultMap id="BaseResultMap" type="com.nt.dao_BASF.MapBox_MapLevel">
        <!--
           WARNING - @mbg.generated
         -->
        <id column="id" property="id" jdbcType="VARCHAR"/>
        <result column="level" property="level" jdbcType="VARCHAR"/>
        <result column="name" property="name" jdbcType="VARCHAR"/>
        <result column="shortname" property="shortname" jdbcType="VARCHAR"/>
        <result column="parentid" property="parentid" jdbcType="VARCHAR"/>
        <result column="remark" property="remark" jdbcType="VARCHAR"/>
        <result column="center" property="center" jdbcType="VARCHAR"/>
        <result column="zoom" property="zoom" jdbcType="VARCHAR"/>
        <result column="geojson" property="geojson" jdbcType="VARCHAR"/>

        <result column="STATUS" property="status" jdbcType="VARCHAR"/>
        <result column="CREATEON" property="createon" jdbcType="TIMESTAMP"/>
        <result column="CREATEBY" property="createby" jdbcType="VARCHAR"/>
        <result column="MODIFYON" property="modifyon" jdbcType="TIMESTAMP"/>
        <result column="MODIFYBY" property="modifyby" jdbcType="VARCHAR"/>
        <result column="Owner" property="owner" jdbcType="VARCHAR"/>
        <result column="TENANTID" property="tenantid" jdbcType="VARCHAR"/>
    </resultMap>

    <select id="selectChildrensStr" resultType="com.nt.dao_BASF.MapBox_MapLevel">
        SELECT
	m.id
FROM
	mapbox_maplevel AS m
WHERE
	m.`STATUS` = "0" AND
	m.cascids LIKE #{mapid}
    </select>

    <select id="getAll" resultType="com.nt.dao_BASF.MapBox_MapLevel">
      SELECT
	*
FROM
	mapbox_maplevel
WHERE
	mapbox_maplevel.`STATUS` = "0"
ORDER BY
	mapbox_maplevel.CREATEON ASC
    </select>

    <select id="getLevelId" resultType="com.nt.dao_BASF.VO.MapBox_MapLevelVo">
    SELECT
        concat( level2.parentid, '/', level2and3and4.level2id, '/', level2and3and4.level3id ) AS levelid
    FROM
        mapbox_maplevel level2,
        (
    SELECT
        level2and3.parentid AS level2id,
        level3and4.parentid AS level3id,
        level3and4.id AS level4id
    FROM
        mapbox_maplevel level2and3,
        ( SELECT id, parentid FROM mapbox_maplevel WHERE id = #{mapid} ) level3and4
    WHERE
        level2and3.id = level3and4.parentid
        ) level2and3and4
    WHERE
        level2.id = level2and3and4.level2id
    </select>
</mapper>
